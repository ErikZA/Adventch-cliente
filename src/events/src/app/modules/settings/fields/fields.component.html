<div class="uk-flex uk-flex-row">

    <div class="uk-flex-1 uk-padding-small">

        <div *ngIf="fields?.data?.length > 0">
            <div *ngFor="let field of fields.data" class="uk-flex uk-flex-row uk-flex-middle uk-margin-small-bottom">
                <div class="uk-flex-1">
                    <span class="uk-display-block uk-text-large"> {{ field?.name }} </span>
                </div>
                <div class="decription-column">
                    <!-- <span class="uk-display-block">Tipo: {{ fieldTypes[field.fieldTypeId - 1].name }} </span>
                    <span class="uk-display-block">Obrigatorio: {{ field.isRequired ? "Sim" : "Não" }} </span> -->
                </div>
                <div class="uk-margin-small-left">
                    <a uk-icon="pencil" (click)="isEdit = true" routerLink="/configuracoes/campos" [queryParams]="{id:field.id}"
                        class="uk-margin-small-right"></a>
                    <a uk-icon="trash" (click)="removeField(field.id)"></a>
                </div>
            </div>
        </div>

        <div *ngIf="fields?.data?.length === 0" class="uk-text-center alert">
            <span>Você não tem campos adicionais cadastrados</span>
        </div>

    </div>

    <div class="fields-form">
        <form [formGroup]="formFields">

            <mat-form-field appearance="outline" class="uk-width-1">
                <mat-label>Nome do campo</mat-label>
                <input matInput placeholder="Placeholder" formControlName="name">
            </mat-form-field>

            <mat-form-field appearance="outline" class="uk-width-1">
                <mat-label>Tipo do campo</mat-label>
                <mat-select formControlName="fieldTypeId">
                    <mat-option *ngFor="let fieldType of fieldTypes" [value]="fieldType.id"> {{ fieldType.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="uk-width-1">
                <textarea matInput placeholder="Descrição do campo" #description maxlength="4000"
                    formControlName="description"></textarea>
                <mat-hint align="end">{{description.value?.length || 0}}/4000</mat-hint>
            </mat-form-field>

            <mat-form-field appearance="outline" class="uk-width-1" autocapitalize="true">
                <textarea style="height: auto !important;" #guidingText maxlength="4000" matInput
                    placeholder="Texto de Orientação" formControlName="guidingText"></textarea>
                <mat-hint align="end">{{guidingText.value?.length || 0}}/4000</mat-hint>
            </mat-form-field>

            <div class="uk-margin-small-bottom">
                <span class="uk-margin-small-right">Campo obrigatorio:</span>
                <mat-slide-toggle formControlName="isRequired"></mat-slide-toggle>
            </div>

            <button mat-flat-button color="primary" (click)="addField()" *ngIf="!isEdit"
                [disabled]="!formFields.valid">Cadastrar</button>

            <button mat-button color="primary" (click)="cleanFormEdit()" class="uk-margin-small-right"
                *ngIf="isEdit">Cancelar</button>
            <button mat-flat-button color="primary" (click)="updateField()" *ngIf="isEdit"
                [disabled]="!formFields.valid">Atualizar</button>

        </form>
    </div>

</div>